<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebBuilder Pro Enhanced - Advanced Website Builder</title>
    
    <!-- Enhanced Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='grad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' style='stop-color:%237c3aed;stop-opacity:1' /><stop offset='100%' style='stop-color:%23a855f7;stop-opacity:1' /></linearGradient></defs><rect width='100' height='100' rx='20' fill='url(%23grad)'/><text x='50' y='65' font-family='Arial,sans-serif' font-size='60' font-weight='bold' text-anchor='middle' fill='white'>W</text></svg>">
    
    <!-- Meta Tags for SEO and Social -->
    <meta name="description" content="WebBuilder Pro Enhanced - The most advanced drag-and-drop website builder with modern UI, real-time collaboration, and professional templates.">
    <meta name="keywords" content="website builder, drag and drop, web design, responsive design, templates">
    <meta name="author" content="WebBuilder Pro Team">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://webbuilder-pro.com/">
    <meta property="og:title" content="WebBuilder Pro Enhanced - Advanced Website Builder">
    <meta property="og:description" content="Create stunning websites with our advanced drag-and-drop builder featuring modern UI and professional templates.">
    <meta property="og:image" content="https://webbuilder-pro.com/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://webbuilder-pro.com/">
    <meta property="twitter:title" content="WebBuilder Pro Enhanced - Advanced Website Builder">
    <meta property="twitter:description" content="Create stunning websites with our advanced drag-and-drop builder featuring modern UI and professional templates.">
    <meta property="twitter:image" content="https://webbuilder-pro.com/twitter-image.jpg">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    
    <!-- External Stylesheets -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- GrapesJS Core -->
    <link rel="stylesheet" href="https://unpkg.com/grapesjs/dist/css/grapes.min.css">
    
    <!-- GrapesJS Plugins -->
    <link rel="stylesheet" href="https://unpkg.com/grapesjs-preset-webpage/dist/grapesjs-preset-webpage.min.css">
    <link rel="stylesheet" href="https://unpkg.com/gjs-blocks-basic/dist/gjs-blocks-basic.min.css">
    
    <!-- Application Stylesheets -->
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style-enhanced.css">
    <link rel="stylesheet" href="context-menu.css">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#7c3aed">
    
    <!-- iOS PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="WebBuilder Pro">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
</head>
<body class="dark-theme">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-overlay show">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2 style="margin-bottom: var(--space-sm); font-weight: var(--font-weight-semibold);">WebBuilder Pro Enhanced</h2>
            <p style="color: var(--color-text-muted);">Loading advanced website builder...</p>
        </div>
    </div>

    <!-- Application Container -->
    <div class="app-container">
        <!-- Enhanced Header -->
        <header class="header">
            <a href="#" class="header-brand">
                <div class="logo">W</div>
                <span>WebBuilder Pro Enhanced</span>
                <span style="
                    background: var(--color-accent-gradient);
                    color: white;
                    padding: 2px 6px;
                    border-radius: var(--radius-xs);
                    font-size: 10px;
                    font-weight: var(--font-weight-bold);
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                    margin-left: var(--space-xs);
                ">Pro</span>
            </a>
            
            <nav class="header-nav">
                <!-- Dynamic buttons will be added by enhanced-features.js -->
            </nav>
        </header>

        <!-- Enhanced Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- Blocks Panel -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">
                    <i class="fas fa-cubes"></i>
                    Components
                </h3>
                <div id="blocks"></div>
            </div>
            
            <!-- Custom Blocks Panel -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">
                    <i class="fas fa-star"></i>
                    Custom Blocks
                </h3>
                <div id="custom-blocks">
                    <p style="
                        color: var(--color-text-muted);
                        font-size: var(--font-size-xs);
                        text-align: center;
                        padding: var(--space-md);
                    ">
                        Save components as custom blocks for reuse
                    </p>
                </div>
            </div>
            
            <!-- Templates Panel -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">
                    <i class="fas fa-layer-group"></i>
                    Templates
                </h3>
                <div id="templates">
                    <div class="template-grid" style="
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: var(--space-sm);
                    ">
                        <div class="template-item card" style="
                            padding: var(--space-sm);
                            cursor: pointer;
                            text-align: center;
                        " data-tooltip="Landing Page Template">
                            <i class="fas fa-rocket" style="
                                font-size: var(--font-size-lg);
                                color: var(--color-accent-primary);
                                margin-bottom: var(--space-xs);
                            "></i>
                            <div style="font-size: var(--font-size-xs);">Landing</div>
                        </div>
                        <div class="template-item card" style="
                            padding: var(--space-sm);
                            cursor: pointer;
                            text-align: center;
                        " data-tooltip="Portfolio Template">
                            <i class="fas fa-briefcase" style="
                                font-size: var(--font-size-lg);
                                color: var(--color-accent-primary);
                                margin-bottom: var(--space-xs);
                            "></i>
                            <div style="font-size: var(--font-size-xs);">Portfolio</div>
                        </div>
                        <div class="template-item card" style="
                            padding: var(--space-sm);
                            cursor: pointer;
                            text-align: center;
                        " data-tooltip="Blog Template">
                            <i class="fas fa-blog" style="
                                font-size: var(--font-size-lg);
                                color: var(--color-accent-primary);
                                margin-bottom: var(--space-xs);
                            "></i>
                            <div style="font-size: var(--font-size-xs);">Blog</div>
                        </div>
                        <div class="template-item card" style="
                            padding: var(--space-sm);
                            cursor: pointer;
                            text-align: center;
                        " data-tooltip="E-commerce Template">
                            <i class="fas fa-shopping-cart" style="
                                font-size: var(--font-size-lg);
                                color: var(--color-accent-primary);
                                margin-bottom: var(--space-xs);
                            "></i>
                            <div style="font-size: var(--font-size-xs);">Shop</div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content" id="main-content">
            <!-- Toolbar -->
            <div id="panel__devices" class="toolbar-section" data-tooltip="Device Preview"></div>
            <div id="panel__options" class="toolbar-section" data-tooltip="Preview Options"></div>
            <div id="panel__views" class="toolbar-section" data-tooltip="Editor Tools"></div>
            
            <!-- Canvas Container -->
            <div class="canvas-container">
                <div id="gjs" class="canvas">
                    <!-- Welcome Content -->
                    <div style="
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        min-height: 60vh;
                        text-align: center;
                        padding: var(--space-2xl);
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        color: white;
                        border-radius: var(--radius-xl);
                        margin: var(--space-xl);
                    ">
                        <h1 style="
                            font-size: var(--font-size-3xl);
                            font-weight: var(--font-weight-bold);
                            margin-bottom: var(--space-lg);
                            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
                        ">Welcome to WebBuilder Pro Enhanced</h1>
                        <p style="
                            font-size: var(--font-size-lg);
                            margin-bottom: var(--space-xl);
                            opacity: 0.9;
                            max-width: 600px;
                        ">
                            Create stunning, responsive websites with our advanced drag-and-drop builder. 
                            Start by dragging components from the sidebar or choose a template to get started quickly.
                        </p>
                        <div style="
                            display: flex;
                            gap: var(--space-md);
                            flex-wrap: wrap;
                            justify-content: center;
                        ">
                            <button class="btn btn-lg" style="
                                background: white;
                                color: var(--color-accent-primary);
                                border: none;
                            ">
                                <i class="fas fa-play"></i>
                                Start Building
                            </button>
                            <button class="btn btn-lg btn-ghost" style="
                                border-color: rgba(255,255,255,0.3);
                                color: white;
                            ">
                                <i class="fas fa-video"></i>
                                Watch Tutorial
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Responsive Indicator -->
                <div id="responsive-indicator" class="responsive-indicator" style="
                    position: absolute;
                    top: var(--space-md);
                    right: var(--space-md);
                    background: var(--color-bg-panel);
                    border: 1px solid var(--color-border);
                    border-radius: var(--radius-full);
                    padding: var(--space-xs) var(--space-sm);
                    font-size: var(--font-size-xs);
                    font-weight: var(--font-weight-medium);
                    color: var(--color-text-secondary);
                    backdrop-filter: blur(10px);
                ">Desktop</div>
            </div>
        </main>

        <!-- Enhanced Properties Panel -->
        <aside class="properties-panel" id="properties-panel">
            <!-- Panel Switcher -->
            <div class="panel-switcher">
                <div id="panel__switcher" style="
                    display: flex;
                    border-bottom: 1px solid var(--color-border);
                    background: var(--color-bg-tertiary);
                "></div>
            </div>
            
            <!-- Panel Content -->
            <div class="panel-content">
                <!-- Layers Panel -->
                <div class="panel-section">
                    <div id="layers-container"></div>
                </div>
                
                <!-- Styles Panel -->
                <div class="panel-section">
                    <div id="style-properties-container"></div>
                    <div id="selector-manager-container"></div>
                </div>
                
                <!-- Traits Panel -->
                <div class="panel-section">
                    <div id="trait-container"></div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu">
        <div class="context-menu-item" data-action="copy">
            <i class="fas fa-copy"></i>
            <span>Copy</span>
            <span class="shortcut">Ctrl+C</span>
        </div>
        <div class="context-menu-item" data-action="cut">
            <i class="fas fa-cut"></i>
            <span>Cut</span>
            <span class="shortcut">Ctrl+X</span>
        </div>
        <div class="context-menu-item" data-action="paste">
            <i class="fas fa-paste"></i>
            <span>Paste</span>
            <span class="shortcut">Ctrl+V</span>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" data-action="clone">
            <i class="fas fa-clone"></i>
            <span>Duplicate</span>
            <span class="shortcut">Ctrl+D</span>
        </div>
        <div class="context-menu-item" data-action="delete">
            <i class="fas fa-trash"></i>
            <span>Delete</span>
            <span class="shortcut">Del</span>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" data-action="move-up">
            <i class="fas fa-arrow-up"></i>
            <span>Move Up</span>
        </div>
        <div class="context-menu-item" data-action="move-down">
            <i class="fas fa-arrow-down"></i>
            <span>Move Down</span>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" data-action="wrap">
            <i class="fas fa-layer-group"></i>
            <span>Wrap in Container</span>
        </div>
    </div>

    <!-- Scripts -->
    <!-- GrapesJS Core -->
    <script src="https://unpkg.com/grapesjs"></script>
    
    <!-- GrapesJS Plugins -->
    <script src="https://unpkg.com/grapesjs-preset-webpage"></script>
    <script src="https://unpkg.com/gjs-blocks-basic"></script>
    <script src="https://unpkg.com/grapesjs-plugin-forms"></script>
    <script src="https://unpkg.com/grapesjs-plugin-export"></script>
    <script src="https://unpkg.com/grapesjs-component-code-editor"></script>
    <script src="https://unpkg.com/grapesjs-component-toolbar"></script>
    
    <!-- Application Scripts -->
    <script src="utils.js"></script>
    <script src="blocks.js"></script>
    <script src="commands.js"></script>
    <script src="enhanced-features.js"></script>
    <script src="script.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
    
    <!-- Analytics (placeholder) -->
    <script>
        // Add your analytics code here
        console.log('WebBuilder Pro Enhanced loaded successfully');
    </script>
</body>
</html>

